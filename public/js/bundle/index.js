var e,t=(e=require("axios"))&&e.__esModule?e.default:e;require("@babel/polyfill");const o=()=>{const e=document.querySelector(".alert");e&&e.parentElement.removeChild(e)},a=(e,t)=>{o();const a=`<div class="alert alert--${e}">${t}</div>`;document.querySelector("body").insertAdjacentHTML("afterbegin",a),window.setTimeout(o,5e3)},s=async()=>{try{"success"===(await t({method:"GET",url:"/api/v1/users/logout"})).data.status&&location.reload(!0)}catch(e){console.log(e.response),a("error","Error logging out try again")}},n=Stripe("pk_test_51IcfmMHseh8kuJW4a5jED3Vg6hLk8GaFzB2NMcX31CYwwtrOdsY0In5h1mNn4qClOGtff4xBN358c9e2BlzFSs1400sbqf6RqC"),r=document.getElementById("map"),c=document.querySelector(".form-login"),d=document.getElementById("jones"),l=document.getElementById("updatepass"),u=document.getElementById("book-tour"),i=document.querySelector(".nav__el--logout");if(r){(e=>{mapboxgl.accessToken="pk.eyJ1Ijoid2hvaXNhYm9uIiwiYSI6ImNrbXAwMzdoczI5cXQyb2w4ODZxM3UzYjkifQ.3IHdIgc38r-Dr7U5qsWTeg";var t=new mapboxgl.Map({container:"map",style:"mapbox://styles/whoisabon/ckmp24lvx3tem17s22da3708e",zoom:7,scrollZoom:!1});const o=new mapboxgl.LngLatBounds;e.forEach((e=>{const a=document.createElement("div");a.className="marker",new mapboxgl.Marker({element:a,anchor:"bottom"}).setLngLat(e.coordinates).addTo(t),new mapboxgl.Popup({offset:30}).setLngLat(e.coordinates).setHTML(`<p>Day ${e.day}: ${e.description}</p>`).addTo(t),o.extend(e.coordinates)})),t.fitBounds(o,{padding:{top:200,bottom:150,left:100,right:100}})})(JSON.parse(document.getElementById("map").dataset.locations))}c&&c.addEventListener("submit",(e=>{e.preventDefault();(async(e,o)=>{try{"success"===(await t({method:"POST",url:"/api/v1/users/login",data:{email:e,password:o}})).data.status&&(a("success","Log in successfull"),window.setTimeout((()=>{location.assign("/")}),1500))}catch(e){a("error",e.response.data.message)}})(document.getElementById("email").value,document.getElementById("password").value)})),d&&d.addEventListener("submit",(e=>{e.preventDefault();const o=new FormData;o.append("name",document.getElementById("name").value),o.append("email",document.getElementById("email").value),o.append("photo",document.getElementById("photo").files[0]),(async e=>{try{"success"===(await t({method:"PATCH",url:"/api/v1/users/updateme",data:e})).data.status&&(a("success","Data updated successfully"),window.setTimeout((()=>{location.reload(!0)}),500))}catch(e){console.log(e.response),a("error","Error logging out try again")}})(o)})),l&&l.addEventListener("submit",(e=>{e.preventDefault();(async(e,o,s)=>{try{"success"===(await t({method:"PATCH",url:"/api/v1/users/updatepassword",data:{current:e,password:o,passwordConfirm:s}})).data.status&&(a("success","Password updated successfully"),window.setTimeout((()=>{location.reload(!0)}),500))}catch(e){console.log(e.response),a("error","Error logging out try again")}})(document.querySelector(".current").value,document.querySelector(".password").value,document.querySelector(".confirmPassword").value)})),u&&u.addEventListener("click",(e=>{(async e=>{try{const o=await t(`/api/v1/bookings/checkout-session/${e}`);await n.redirectToCheckout({sessionId:o.data.session.id})}catch(e){console.log(e.response),a("error","Error cannot access payment platform")}})(e.target.dataset.tourid)})),i&&i.addEventListener("click",s);
//# sourceMappingURL=index.js.map
